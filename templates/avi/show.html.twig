{% extends 'basebackoffice.html.twig' %}

{% block title %}Détails de l'avis #{{ avi.idAvis }}{% endblock %}

{% block body %}
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-dark font-weight-bold">
      <i class="fas fa-comment-dots mr-2 text-primary"></i> Détails de l'avis
    </h1>
    <div class="btn-group">
      <a href="{{ path('app_avi_index') }}" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-arrow-left mr-1"></i> Retour
      </a>
      <a href="{{ path('app_avi_edit', {'id_avis': avi.idAvis}) }}" class="btn btn-outline-primary btn-sm ml-2">
        <i class="fas fa-edit mr-1"></i> Modifier
      </a>
    </div>
  </div>

  <div class="card shadow-lg border-0 rounded-lg">
    <div class="card-header bg-gradient-lightblue d-flex justify-content-between align-items-center text-white py-3">
      <h5 class="mb-0 font-weight-bold">#{{ avi.idAvis }} – {{ avi.datePublication ? avi.datePublication|date('d M Y') : 'Date inconnue' }}</h5>
      <span class="badge badge-{{ avi.estAccepte ? 'success' : 'warning' }}">
        <i class="fas fa-{{ avi.estAccepte ? 'check-circle' : 'clock' }}"></i>
        {{ avi.estAccepte ? 'Accepté' : 'En attente' }}
      </span>
    </div>

    <div class="card-body">
      <div class="row">
        <div class="col-md-8">
          <h5 class="text-muted font-weight-bold mb-2">Commentaire</h5>
          <div class="p-3 bg-light border rounded shadow-sm text-dark">
            <i class="fas fa-quote-left mr-2 text-secondary"></i>{{ avi.commentaire }}
          </div>
        </div>

        <div class="col-md-4">
          <h5 class="text-muted font-weight-bold mb-2">Note</h5>
          <div class="rating-display mb-3">
            {% for i in 1..5 %}
              <i class="fas fa-star {{ i <= avi.note ? 'text-warning' : 'text-light' }} fa-lg"></i>
            {% endfor %}
            <span class="ml-2 font-weight-bold text-dark">{{ avi.note }}/5</span>
          </div>

          <h5 class="text-muted font-weight-bold mb-2">Date de publication</h5>
          <div class="mb-4">
            <i class="far fa-calendar-alt text-secondary mr-2"></i>
            {{ avi.datePublication ? avi.datePublication|date('d/m/Y à H:i') : 'Non spécifiée' }}
          </div>

          <h5 class="text-muted font-weight-bold mb-2">Statut</h5>
          <span class="badge badge-pill badge-{{ avi.estAccepte ? 'success' : 'warning' }} py-2 px-3">
            <i class="fas fa-{{ avi.estAccepte ? 'check' : 'hourglass-half' }}"></i>
            {{ avi.estAccepte ? 'Avis accepté' : 'En attente de modération' }}
          </span>
        </div>
      </div>

      <hr class="my-4">

      <div class="d-flex justify-content-end">
        {{ include('avi/_delete_form.html.twig') }}
      </div>
    </div>
  </div>
{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <style>
    .bg-gradient-lightblue {
      background: linear-gradient(60deg, #4e73df, #1cc88a);
      color: white !important;
      border-radius: 0.35rem 0.35rem 0 0;
    }
    .rating-display {
      display: flex;
      align-items: center;
    }
    .card {
      border: none;
      border-radius: 0.75rem;
    }
    .btn-outline-primary:hover,
    .btn-outline-secondary:hover {
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
      transition: all 0.2s ease-in-out;
    }
    .badge-success { background-color: #1cc88a; }
    .badge-warning { background-color: #f6c23e; }
    .bg-light { background-color: #f8f9fc !important; }
    .card-body { background-color: #fff; }
  </style>
{% endblock %}

